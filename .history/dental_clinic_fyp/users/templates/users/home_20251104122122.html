{% extends "users/base.html" %}
{% block title %}Welcome to Dental Clinic{% endblock %}
{% load static %}

{% block content %}
{% if messages %}
  {% for message in messages %}
    <div class="alert 
        {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %} 
        alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endfor %}
{% endif %}


<div class="container text-center mt-5">
    <h1 class="text-center mb-3">
        Welcome to CrystalSmile Dental
    </h1>
    <p style="font-size:1.1rem; color:#555;">Your oral health is our priority.</p>
</div>



<!-- Our Services Section -->
<div class="container mt-5">
    <h2 class="text-center mb-4">Our Services</h2>

    <div class="row row-cols-1 row-cols-md-3 g-4" id="services-section" style="display:none;">
        <!-- Service 1 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/teeth_cleaning.jpg' %}" class="card-img-top" alt="Teeth Cleaning">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Teeth Cleaning
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Professional teeth cleaning to remove plaque and maintain oral hygiene.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 800
                </div>
            </div>
        </div>

        <!-- Service 2 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/tooth_whitening.jpg' %}" class="card-img-top" alt="Tooth Whitening">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Tooth Whitening
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Brighten your smile with safe and effective whitening treatments.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 1500
                </div>
            </div>
        </div>

        <!-- Service 3 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/filling.jpg' %}" class="card-img-top" alt="Dental Filling">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Dental Filling
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Restore decayed teeth with high-quality fillings for durability and comfort.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 1200
                </div>
            </div>
        </div>

        <!-- Service 4 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/braces.jpg' %}" class="card-img-top" alt="Braces">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Braces
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Correct misaligned teeth with custom braces for a confident smile.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 25000
                </div>
            </div>
        </div>

        <!-- Service 5 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/root_canal.jpg' %}" class="card-img-top" alt="Root Canal">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Root Canal Treatment
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Relieve pain and save your tooth with professional root canal therapy.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 5000
                </div>
            </div>
        </div>

        <!-- Service 6 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/dental_implant.jpg' %}" class="card-img-top" alt="Dental Implant">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Dental Implant
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Permanent tooth replacement to restore function and aesthetics.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 35000
                </div>
            </div>
        </div>

    </div>
</div>
<div class="container mt-5">
    <h2 class="text-center mb-4">Our Doctors</h2>
    <div class="doctors-container">
  
      {% for doctor in doctors %}
        <div class="doctor-card">
          <img src="{{ doctor.profile_picture.url if doctor.profile_picture else '/static/images/default_profile.png' }}" 
               alt="Profile Picture">
          <h4>Dr. {{ doctor.user.first_name }} {{ doctor.user.last_name }}</h4>
          <p><strong>Degree:</strong> {{ doctor.degree|default:"N/A" }}</p>
          <p><strong>Specialization:</strong> {{ doctor.specialization|default:"N/A" }}</p>
          <p><strong>Experience:</strong> {{ doctor.experience_years|default:"0" }} years</p>
          <p><strong>Bio:</strong> {{ doctor.bio|default:"N/A" }}</p>
        </div>
      {% empty %}
        <p>No doctors available at the moment.</p>
      {% endfor %}
  
    </div>
  </div>
<script>
    async function fetchDoctors() {
        try {
            const response = await fetch("{% url 'appointments:all_doctors' %}")

            const doctors = await response.json();
            const container = document.getElementById('doctors-container');
    
            doctors.forEach(doc => {
                const col = document.createElement('div');
                col.className = 'col';
    
                const card = document.createElement('div');
                card.className = 'doctor-card';
                card.style.border = '1px solid #ccc';
                card.style.borderRadius = '12px';
                card.style.padding = '20px';
                card.style.textAlign = 'center';
                card.style.boxShadow = '0 4px 10px rgba(0,0,0,0.1)';
                card.style.marginBottom = '20px';
    
                const img = document.createElement('img');
                img.src = doc.profile_picture;
                img.alt = doc.full_name;
                img.style.width = '150px';
                img.style.height = '150px';
                img.style.borderRadius = '50%';
                img.style.objectFit = 'cover';
                img.style.marginBottom = '10px';
                img.style.border = '3px solid #007B7F';
    
                const name = document.createElement('h4');
                name.textContent = doc.full_name;
                name.style.color = '#002f5f';
                name.style.fontWeight = '700';
                name.style.marginBottom = '5px';
    
                const degree = document.createElement('p');
                degree.innerHTML = `<strong>Degree:</strong> ${doc.degree}`;
    
                const specialization = document.createElement('p');
                specialization.innerHTML = `<strong>Specialization:</strong> ${doc.specialization}`;
    
                const experience = document.createElement('p');
                experience.innerHTML = `<strong>Experience:</strong> ${doc.experience_years} years`;
    
                const bio = document.createElement('p');
                bio.innerHTML = `<strong>Bio:</strong> ${doc.bio}`;
    
                card.append(img, name, degree, specialization, experience, bio);
                col.appendChild(card);
                container.appendChild(col);
            });
        } catch (error) {
            console.error("Error fetching doctors:", error);
        }
    }
    
    document.addEventListener('DOMContentLoaded', fetchDoctors);
    </script>



<footer id="footer-section" style="background:#007B7F; color:white; padding:50px 20px; margin-top:50px;  margin-right:10px; display:none;">
    <div class="row">

        <!-- About Us -->
        <div class="col-md-6 mb-4">
            <h5 style="font-weight:700;">About Us</h5>
            <p>
                We are committed to providing the best dental care for you and your family. 
                Reach out to us anytime for inquiries, appointments, or guidance on oral health. 
                Our friendly team is always ready to assist and ensure your visit is comfortable and pleasant.
            </p>

            <!-- Google Maps -->
            <h5 style="font-weight:700; margin-top:20px; margin-bottom:15px;">Our Location</h5>
            <div style="width: 100%; height: 250px; border-radius:12px; overflow:hidden; box-shadow:0 4px 10px rgba(0,0,0,0.2);">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3532.7761952771157!2d85.31854881185906!3d27.693311276091404!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39eb19b032e93fc1%3A0x4a61dc499d928027!2sSt.%20Xavier%27s%20College!5e0!3m2!1sen!2snp!4v1760898158288!5m2!1sen!2snp" 
                    width="100%" 
                    height="100%" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>

       <!-- Contact Form -->
<div class="col-md-6">
    <img src="{% static 'images/room.jpg' %}" style="border: 2px solid red;">
</div>

    
        <!-- Row 2: Map -->
    <hr style="border-color: rgba(255,255,255,0.3);">

        <div class="text-center">
            &copy;2025 CrystalSmile Dental Clinic. All rights reserved.
        </div>
    </div>
</footer>

<style>
    footer input, footer textarea {
        border-radius: 6px;
        border: 2px solid black;
        padding: 10px;
        width: 100%;
    }
    footer input:focus, footer textarea:focus {
        outline: none;
        box-shadow: 0 0 5px black;
    }
    footer button:hover {
        transform: translateY(-2px);
        transition: all 0.2s;
    }
    
    h1 {
        font-family: 'Calibri';
        font-size: 3rem;
        color: #0B0047;
        font-weight: 700;
        letter-spacing: 1px;
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.1);
    }

    h2 {
        font-family: 'Nunito Sans', sans-serif;
        font-size: 2rem;
        font-weight: 700;
        color: #FF4040;
        text-transform: uppercase;
        letter-spacing: 1px;
        border-bottom: 3px solid #00a2e2;
        display: inline-block;
        padding-bottom: 6px;
        margin: 25px auto 40px auto;
        text-align: center;
    }

    #services-section .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 123, 127, 0.3);
    }

    .card-title {
        text-shadow: 1px 1px 3px rgba(0,123,127,0.3);
    }
</style>

<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            const section = document.getElementById('services-section');
            section.style.display = 'flex';
            section.style.opacity = 0;
            let op = 0;
            const fade = setInterval(() => {
                if(op >= 1) clearInterval(fade);
                section.style.opacity = op;
                op += 0.05;
            }, 50);
        }, 1000);
    });

    window.addEventListener('load', function() {
        setTimeout(function() {
            const section = document.getElementById('services-section');
            section.style.display = 'flex';
            section.style.opacity = 0;
            let op = 0;
            const fade = setInterval(() => {
                if(op >= 1) clearInterval(fade);
                section.style.opacity = op;
                op += 0.05;
            }, 50);

            setTimeout(function() {
                const footer = document.getElementById('footer-section');
                footer.style.display = 'block';
                footer.style.opacity = 0;
                let fop = 0;
                const fadeFooter = setInterval(() => {
                    if(fop >= 1) clearInterval(fadeFooter);
                    footer.style.opacity = fop;
                    fop += 0.05;
                }, 30);
            }, 800);
        }, 1000);
    });
</script>
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            const section = document.getElementById('doctors-section');
            let op = 0;
            const fade = setInterval(() => {
                if(op >= 1) clearInterval(fade);
                section.style.opacity = op;
                op += 0.05;
            }, 50);
        }, 1000); // fade in after 1 second
    });
    </script>
    
    
{% endblock %}
