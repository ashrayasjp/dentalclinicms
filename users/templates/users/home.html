{% extends "users/base.html" %}
{% block title %}Welcome to Dental Clinic{% endblock %}
{% load static %}

{% block content %}
{% if messages %}
  {% for message in messages %}
    <div class="alert 
        {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %} 
        alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endfor %}
{% endif %}


<div class="container text-center mt-5">
    <h1 class="text-center mb-3">
        Welcome to CrystalSmile Dental
    </h1>
    <p style="font-size:1.1rem; color:#555;">Your oral health is our priority.</p>
</div>



<!-- Our Services Section -->
<div class="container mt-5">
    <h2 class="text-center mb-4">Our Services</h2>

    <div class="row row-cols-1 row-cols-md-3 g-4" id="services-section" style="display:none;">
        <!-- Service 1 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/teeth_cleaning.jpg' %}" class="card-img-top" alt="Teeth Cleaning">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Teeth Cleaning
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Professional teeth cleaning to remove plaque and maintain oral hygiene.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 800
                </div>
            </div>
        </div>

        <!-- Service 2 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/tooth_whitening.jpg' %}" class="card-img-top" alt="Tooth Whitening">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Tooth Whitening
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Brighten your smile with safe and effective whitening treatments.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 1500
                </div>
            </div>
        </div>

        <!-- Service 3 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/filling.jpg' %}" class="card-img-top" alt="Dental Filling">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Dental Filling
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Restore decayed teeth with high-quality fillings for durability and comfort.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 1200
                </div>
            </div>
        </div>

        <!-- Service 4 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/braces.jpg' %}" class="card-img-top" alt="Braces">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Braces
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Correct misaligned teeth with custom braces for a confident smile.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 25000
                </div>
            </div>
        </div>

        <!-- Service 5 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/root_canal.jpg' %}" class="card-img-top" alt="Root Canal">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Root Canal Treatment
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Relieve pain and save your tooth with professional root canal therapy.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 5000
                </div>
            </div>
        </div>

        <!-- Service 6 -->
        <div class="col">
            <div class="card h-100 shadow-sm" 
                 style="border:1px solid #000; border-radius:12px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{% static 'images/dental_implant.jpg' %}" class="card-img-top" alt="Dental Implant">
                <div class="card-body" style="background-color:#fefefe; padding:20px;">
                    <h5 class="card-title text-primary fw-bold mb-2" 
                        style="border-bottom: 2px solid #007B7F; display:inline-block; padding-bottom:5px;">
                        Dental Implant
                    </h5>
                    <p class="card-text text-secondary" style="font-size:0.95rem;">
                        Permanent tooth replacement to restore function and aesthetics.
                    </p>
                </div>
                <div class="card-footer text-center" style="background-color:#f8f9fa; font-weight:600; color:#007B7F;">
                    Rs. 35000
                </div>
            </div>
        </div>

    </div>
</div>


<!-- Our Doctors Section (Dynamic) -->
<div class="container mt-5" id="doctors-section" style="opacity:0;">
    <h2 class="text-center mb-4">Our Doctors</h2>
    <div class="row row-cols-1 row-cols-md-3 g-4 justify-content-center">

        {% for doctor in doctors %}
        <div class="col">
            <div class="card h-100 shadow-sm p-3 text-center" style="border:1px solid #000; border-radius:12px;">
                <img src="{{ doctor.profile_picture|default:'/static/images/default_profile.png' }}"
                     class="rounded-circle mx-auto d-block" 
                     style="width:180px; height:180px; object-fit:cover; border:3px solid #007B7F;"
                     alt="{{ doctor.full_name }}">
                <div class="card-body mt-3">
                    <h5 class="card-title text-primary fw-bold">{{ doctor.full_name }}</h5>
                   
                    <p class="text-secondary mb-1"><strong>Degree:</strong> {{ doctor.degree }}</p>
                    {% if doctor.specialization %}
                        <p class="text-secondary mb-1"><strong>Specialization:</strong> {{ doctor.specialization }}</p>
                    {% endif %}
                    {% if doctor.experience_years %}
                        <p class="text-secondary mb-1"><strong>Experience:</strong> {{ doctor.experience_years }} years</p>
                    {% endif %}
                    {% if doctor.bio %}
                        <p class="text-secondary"><strong>Bio:</strong> {{ doctor.bio }}</p>
                    {% endif %}
                    <p class="text-secondary mb-1"><strong>Email:</strong> {{ doctor.email }}</p>
                </div>
            </div>
        </div>
        {% endfor %}

    </div>
</div>








<footer id="footer-section" style="background:#007B7F; color:white; padding:50px 20px; margin-top:50px;  margin-right:10px; display:none;">
    <div class="row">

        <!-- About Us -->
        <div class="col-md-6 mb-4">
            <h5 style="font-weight:700;">About Us</h5>
            <p>
                We are committed to providing the best dental care for you and your family. 
                Reach out to us anytime for inquiries, appointments, or guidance on oral health. 
                Our friendly team is always ready to assist and ensure your visit is comfortable and pleasant.
            </p>

            <!-- Google Maps -->
            <h5 style="font-weight:700; margin-top:20px; margin-bottom:15px;">Our Location</h5>
            <div style="width: 100%; height: 250px; border-radius:12px; overflow:hidden; box-shadow:0 4px 10px rgba(0,0,0,0.2);">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3532.7761952771157!2d85.31854881185906!3d27.693311276091404!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39eb19b032e93fc1%3A0x4a61dc499d928027!2sSt.%20Xavier%27s%20College!5e0!3m2!1sen!2snp!4v1760898158288!5m2!1sen!2snp" 
                    width="100%" 
                    height="100%" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>

       <!-- Contact Form -->
<div class="col-md-6">
    <img src="{% static 'images/room.jpg' %}" style="border: 2px solid red;">
</div>

    
        <!-- Row 2: Map -->
    <hr style="border-color: rgba(255,255,255,0.3);">
   
    <div class="text-center fs-6">
        <img src="{% static 'images/logo.png' %}" alt="Logo" width="30" height="30">
        &copy;2025 CrystalSmile Dental Clinic. All rights reserved.
    </div>
    
    </div>
</footer>

<style>
    footer input, footer textarea {
        border-radius: 6px;
        border: 2px solid black;
        padding: 10px;
        width: 100%;
    }
    footer input:focus, footer textarea:focus {
        outline: none;
        box-shadow: 0 0 5px black;
    }
    footer button:hover {
        transform: translateY(-2px);
        transition: all 0.2s;
    }
    
    h1 {
        font-family: 'Calibri';
        font-size: 3rem;
        color: #0B0047;
        font-weight: 700;
        letter-spacing: 1px;
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.1);
    }

    h2 {
        font-family: 'Nunito Sans', sans-serif;
        font-size: 2rem;
        font-weight: 700;
        color: #FF4040;
        text-transform: uppercase;
        letter-spacing: 1px;
        border-bottom: 3px solid #00a2e2;
        display: inline-block;
        padding-bottom: 6px;
        margin: 25px auto 40px auto;
        text-align: center;
    }

    #services-section .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 123, 127, 0.3);
    }

    .card-title {
        text-shadow: 1px 1px 3px rgba(0,123,127,0.3);
    }
</style>

<script>
    // Doctor data from Django context
    const doctorsData = {
      {% for doctor in doctors %}
        {{ doctor.id }}: {
          full_name: "{{ doctor.full_name|escapejs }}",
          email: "{{ doctor.email|escapejs }}",
          degree: "{{ doctor.degree|default:'N/A'|escapejs }}",
          specialization: "{{ doctor.specialization|default:'N/A'|escapejs }}",
          experience_years: "{{ doctor.experience_years|default:'0' }}",
          bio: "{{ doctor.bio|default:'N/A'|escapejs }}",
          profile_picture: "{{ doctor.profile_picture.url|default:'/static/images/default_profile.png' }}"
        }{% if not forloop.last %},{% endif %}
      {% endfor %}
    };
  
    // Handle doctor selection (if you have a dropdown)
    const select = document.getElementById('doctor-select');
    if (select) {
      select.addEventListener('change', function() {
        const docId = this.value;
        const detailsTab = document.getElementById('doctor-details');
  
        if (!docId) {
          detailsTab.style.display = 'none';
          document.getElementById('selected-doctor').value = '';
          return;
        }
  
        const doc = doctorsData[docId];
        document.getElementById('selected-doctor').value = docId;
        document.getElementById('doc-name').textContent = doc.full_name;
        document.getElementById('doc-email').textContent = doc.email;
        document.getElementById('doc-degree').textContent = doc.degree;
        document.getElementById('doc-specialization').textContent = doc.specialization;
        document.getElementById('doc-experience').textContent = doc.experience_years;
        document.getElementById('doc-bio').textContent = doc.bio;
        document.getElementById('doc-profile').src = doc.profile_picture;
  
        detailsTab.style.display = 'block';
      });
    }
  
    // Fade-in function
    const fadeIn = (el, displayStyle = 'block') => {
      if (!el) return;
      el.style.display = displayStyle;
      el.style.opacity = 0;
      let op = 0;
      const interval = setInterval(() => {
        if (op >= 1) clearInterval(interval);
        el.style.opacity = op;
        op += 0.05;
      }, 50);
    };
  
    // Fade in sections on window load
    window.addEventListener('load', function() {
      const servicesSection = document.getElementById('services-section');
      if (servicesSection) fadeIn(servicesSection, 'flex');
  
      const doctorsSection = document.getElementById('doctors-section');
      if (doctorsSection) fadeIn(doctorsSection, 'block');
  
      const footer = document.getElementById('footer-section');
      if (footer) fadeIn(footer, 'block');
    });
  </script>
  
    
{% endblock %}